<html><head><title>circe: Custom codecs</title><meta charset="utf-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="Travis Brown" /><meta name="description" content="A JSON library for Scala powered by Cats" /><meta name="og:image" content="/circe/img/poster.png" /><meta name="image" property="og:image" content="/circe/img/poster.png" /><meta name="og:title" content="circe: Custom codecs" /><meta name="title" property="og:title" content="circe: Custom codecs" /><meta name="og:site_name" content="circe" /><meta name="og:url" content="https://circe.github.io/circe/" /><meta name="og:type" content="website" /><meta name="og:description" content="A JSON library for Scala powered by Cats" /><link rel="icon" type="image/png" href="/circe/img/favicon.png" /><meta name="twitter:title" content="circe: Custom codecs" /><meta name="twitter:image" content="/circe/img/poster.png" /><meta name="twitter:description" content="A JSON library for Scala powered by Cats" /><meta name="twitter:card" content="summary_large_image" /><link rel="icon" type="image/png" sizes="16x16" href="/circe/img/favicon16x16.png" /><link rel="icon" type="image/png" sizes="24x24" href="/circe/img/favicon24x24.png" /><link rel="icon" type="image/png" sizes="32x32" href="/circe/img/favicon32x32.png" /><link rel="icon" type="image/png" sizes="48x48" href="/circe/img/favicon48x48.png" /><link rel="icon" type="image/png" sizes="57x57" href="/circe/img/favicon57x57.png" /><link rel="icon" type="image/png" sizes="60x60" href="/circe/img/favicon60x60.png" /><link rel="icon" type="image/png" sizes="64x64" href="/circe/img/favicon64x64.png" /><link rel="icon" type="image/png" sizes="70x70" href="/circe/img/favicon70x70.png" /><link rel="icon" type="image/png" sizes="72x72" href="/circe/img/favicon72x72.png" /><link rel="icon" type="image/png" sizes="76x76" href="/circe/img/favicon76x76.png" /><link rel="icon" type="image/png" sizes="96x96" href="/circe/img/favicon96x96.png" /><link rel="icon" type="image/png" sizes="114x114" href="/circe/img/favicon114x114.png" /><link rel="icon" type="image/png" sizes="120x120" href="/circe/img/favicon120x120.png" /><link rel="icon" type="image/png" sizes="128x128" href="/circe/img/favicon128x128.png" /><link rel="icon" type="image/png" sizes="144x144" href="/circe/img/favicon144x144.png" /><link rel="icon" type="image/png" sizes="150x150" href="/circe/img/favicon150x150.png" /><link rel="icon" type="image/png" sizes="152x152" href="/circe/img/favicon152x152.png" /><link rel="icon" type="image/png" sizes="196x196" href="/circe/img/favicon196x196.png" /><link rel="icon" type="image/png" sizes="310x310" href="/circe/img/favicon310x310.png" /><link rel="icon" type="image/png" sizes="310x150" href="/circe/img/favicon310x150.png" /><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" /><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" /><link rel="stylesheet" href="/circe/highlight/styles/atom-one-light.css" /><link rel="stylesheet" href="/circe/css/pattern-style.css" /><link rel="stylesheet" href="/circe/css/override.css" /></head><body class="docs"><div id="wrapper"><div id="sidebar-wrapper"><ul id="sidebar" class="sidebar-nav"><li class="sidebar-brand"><a href="/circe/" class="brand"><div class="brand-wrapper"><span>circe</span></div></a></li> <li><a href="/circe/parsing.html" class="">Parsing JSON</a></li> <li><a href="/circe/cursors.html" class="">Traversing and modifying JSON</a></li> <li><a href="/circe/codec.html" class="">Encoding and decoding</a> <ul class="sub-section"> <li><a href="/circe/codecs/semiauto-derivation.html" class="">Semi-automatic derivation</a></li> <li><a href="/circe/codecs/auto-derivation.html" class="">Automatic derivation</a></li> <li><a href="/circe/codecs/custom-codecs.html" class=" active ">Custom codecs</a></li> <li><a href="/circe/codecs/adt.html" class="">ADT (Algebraic Data Types)</a></li> <li><a href="/circe/codecs/known-issues.html" class="">Warnings and known issues</a></li></ul></li> <li><a href="/circe/optics.html" class="">Optics</a></li> <li><a href="/circe/performance.html" class="">Performance</a></li> <li><a href="/circe/contributing.html" class="">Guide for contributors</a></li></ul></div><div id="page-content-wrapper"><div class="nav"><div class="container-fluid"><div class="row"><div class="col-lg-12"><div class="action-menu pull-left clearfix"><a href="#menu-toggle" id="menu-toggle"><i class="fa fa-bars" aria-hidden="true"></i></a></div><ul class="pull-right"><li id="gh-eyes-item" class="hidden-xs"><a href="https://github.com/circe/circe" target="_blank" rel="noopener noreferrer"><i class="fa fa-eye"></i><span>Watchers<span id="eyes" class="label label-default">--</span></span></a></li><li id="gh-stars-item" class="hidden-xs"><a href="https://github.com/circe/circe" target="_blank" rel="noopener noreferrer"><i class="fa fa-star-o"></i><span>Stars<span id="stars" class="label label-default">--</span></span></a></li><li><a href="#" onclick="shareSiteTwitter('circe A JSON library for Scala powered by Cats');"><i class="fa fa-twitter"></i></a></li><li><a href="#" onclick="shareSiteFacebook('circe A JSON library for Scala powered by Cats');"><i class="fa fa-facebook"></i></a></li><li><a href="#" onclick="shareSiteGoogle();"><i class="fa fa-google-plus"></i></a></li></ul></div></div></div></div><div id="content" data-github-owner="circe" data-github-repo="circe"><div class="content-wrapper"><section><h3 id="custom-encodersdecoders">Custom encoders/decoders</h3>

<p>If you want to write your own codec instead of using automatic or semi-automatic derivation, you can do so in a couple of ways.</p>

<p>Firstly, you can write a new <code class="highlighter-rouge">Encoder[A]</code> and <code class="highlighter-rouge">Decoder[A]</code> from scratch:</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nn">io.circe.</span><span class="o">{</span> <span class="nc">Decoder</span><span class="o">,</span> <span class="nc">Encoder</span><span class="o">,</span> <span class="nc">HCursor</span><span class="o">,</span> <span class="nc">Json</span> <span class="o">}</span>

<span class="k">class</span> <span class="nc">Thing</span><span class="o">(</span><span class="k">val</span> <span class="n">foo</span><span class="k">:</span> <span class="kt">String</span><span class="o">,</span> <span class="k">val</span> <span class="n">bar</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span>

<span class="k">implicit</span> <span class="k">val</span> <span class="n">encodeFoo</span><span class="k">:</span> <span class="kt">Encoder</span><span class="o">[</span><span class="kt">Thing</span><span class="o">]</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">Encoder</span><span class="o">[</span><span class="kt">Thing</span><span class="o">]</span> <span class="o">{</span>
  <span class="k">final</span> <span class="k">def</span> <span class="n">apply</span><span class="o">(</span><span class="n">a</span><span class="k">:</span> <span class="kt">Thing</span><span class="o">)</span><span class="k">:</span> <span class="kt">Json</span> <span class="o">=</span> <span class="nc">Json</span><span class="o">.</span><span class="n">obj</span><span class="o">(</span>
    <span class="o">(</span><span class="s">"foo"</span><span class="o">,</span> <span class="nc">Json</span><span class="o">.</span><span class="n">fromString</span><span class="o">(</span><span class="n">a</span><span class="o">.</span><span class="n">foo</span><span class="o">)),</span>
    <span class="o">(</span><span class="s">"bar"</span><span class="o">,</span> <span class="nc">Json</span><span class="o">.</span><span class="n">fromInt</span><span class="o">(</span><span class="n">a</span><span class="o">.</span><span class="n">bar</span><span class="o">))</span>
  <span class="o">)</span>
<span class="o">}</span>
<span class="c1">// encodeFoo: Encoder[Thing] = repl.Session$App$$anon$1@40838c90
</span>
<span class="k">implicit</span> <span class="k">val</span> <span class="n">decodeFoo</span><span class="k">:</span> <span class="kt">Decoder</span><span class="o">[</span><span class="kt">Thing</span><span class="o">]</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">Decoder</span><span class="o">[</span><span class="kt">Thing</span><span class="o">]</span> <span class="o">{</span>
  <span class="k">final</span> <span class="k">def</span> <span class="n">apply</span><span class="o">(</span><span class="n">c</span><span class="k">:</span> <span class="kt">HCursor</span><span class="o">)</span><span class="k">:</span> <span class="kt">Decoder.Result</span><span class="o">[</span><span class="kt">Thing</span><span class="o">]</span> <span class="k">=</span>
    <span class="k">for</span> <span class="o">{</span>
      <span class="n">foo</span> <span class="k">&lt;-</span> <span class="n">c</span><span class="o">.</span><span class="n">downField</span><span class="o">(</span><span class="s">"foo"</span><span class="o">).</span><span class="n">as</span><span class="o">[</span><span class="kt">String</span><span class="o">]</span>
      <span class="n">bar</span> <span class="k">&lt;-</span> <span class="n">c</span><span class="o">.</span><span class="n">downField</span><span class="o">(</span><span class="s">"bar"</span><span class="o">).</span><span class="n">as</span><span class="o">[</span><span class="kt">Int</span><span class="o">]</span>
    <span class="o">}</span> <span class="k">yield</span> <span class="o">{</span>
      <span class="k">new</span> <span class="nc">Thing</span><span class="o">(</span><span class="n">foo</span><span class="o">,</span> <span class="n">bar</span><span class="o">)</span>
    <span class="o">}</span>
<span class="o">}</span>
<span class="c1">// decodeFoo: Decoder[Thing] = repl.Session$App$$anon$2@682be297
</span></code></pre></div></div>

<p>But in many cases you might find it more convenient to piggyback on top of the decoders that are
already available. For example, a codec for <code class="highlighter-rouge">java.time.Instant</code> might look like this:</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nn">io.circe.</span><span class="o">{</span> <span class="nc">Decoder</span><span class="o">,</span> <span class="nc">Encoder</span> <span class="o">}</span>
<span class="k">import</span> <span class="nn">java.time.Instant</span>
<span class="k">import</span> <span class="nn">scala.util.Try</span>

<span class="k">implicit</span> <span class="k">val</span> <span class="n">encodeInstant</span><span class="k">:</span> <span class="kt">Encoder</span><span class="o">[</span><span class="kt">Instant</span><span class="o">]</span> <span class="k">=</span> <span class="nc">Encoder</span><span class="o">.</span><span class="n">encodeString</span><span class="o">.</span><span class="n">contramap</span><span class="o">[</span><span class="kt">Instant</span><span class="o">](</span><span class="k">_</span><span class="o">.</span><span class="n">toString</span><span class="o">)</span>
<span class="c1">// encodeInstant: Encoder[Instant] = io.circe.Encoder$$anon$1@2a71e163
</span>
<span class="k">implicit</span> <span class="k">val</span> <span class="n">decodeInstant</span><span class="k">:</span> <span class="kt">Decoder</span><span class="o">[</span><span class="kt">Instant</span><span class="o">]</span> <span class="k">=</span> <span class="nc">Decoder</span><span class="o">.</span><span class="n">decodeString</span><span class="o">.</span><span class="n">emapTry</span> <span class="o">{</span> <span class="n">str</span> <span class="k">=&gt;</span>
  <span class="nc">Try</span><span class="o">(</span><span class="nc">Instant</span><span class="o">.</span><span class="n">parse</span><span class="o">(</span><span class="n">str</span><span class="o">))</span>
<span class="o">}</span>
<span class="c1">// decodeInstant: Decoder[Instant] = io.circe.Decoder$$anon$14@4af8788f
</span></code></pre></div></div>

<h4 id="older-scala-versions">Older scala versions</h4>

<p>If you are using custom codecs and an older versions of scala (below 2.12) and you get errors like 
this <code class="highlighter-rouge">value flatMap is not a member of io.circe.Decoder.Result[Option[String]]</code> or 
<code class="highlighter-rouge">value map is not a member of io.circe.Decoder.Result[Option[String]]</code> then you need to use the 
following import: <code class="highlighter-rouge">import cats.syntax.either._</code> to fix this.</p>

<h3 id="custom-key-types">Custom key types</h3>

<p>If you need to encode/decode <code class="highlighter-rouge">Map[K, V]</code> where <code class="highlighter-rouge">K</code> is not <code class="highlighter-rouge">String</code> (or <code class="highlighter-rouge">Symbol</code>, <code class="highlighter-rouge">Int</code>, <code class="highlighter-rouge">Long</code>, etc.),
you need to provide a <code class="highlighter-rouge">KeyEncoder</code> and/or <code class="highlighter-rouge">KeyDecoder</code> for your custom key type.</p>

<p>For example:</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nn">io.circe._</span><span class="o">,</span> <span class="n">io</span><span class="o">.</span><span class="n">circe</span><span class="o">.</span><span class="n">syntax</span><span class="o">.</span><span class="k">_</span>

<span class="k">case</span> <span class="k">class</span> <span class="nc">Foo</span><span class="o">(</span><span class="n">value</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span>

<span class="k">implicit</span> <span class="k">val</span> <span class="n">fooKeyEncoder</span><span class="k">:</span> <span class="kt">KeyEncoder</span><span class="o">[</span><span class="kt">Foo</span><span class="o">]</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">KeyEncoder</span><span class="o">[</span><span class="kt">Foo</span><span class="o">]</span> <span class="o">{</span>
  <span class="k">override</span> <span class="k">def</span> <span class="n">apply</span><span class="o">(</span><span class="n">foo</span><span class="k">:</span> <span class="kt">Foo</span><span class="o">)</span><span class="k">:</span> <span class="kt">String</span> <span class="o">=</span> <span class="n">foo</span><span class="o">.</span><span class="n">value</span>
<span class="o">}</span>
<span class="c1">// fooKeyEncoder: KeyEncoder[Foo] = repl.Session$App$$anon$3@16438a4c
</span><span class="k">val</span> <span class="n">map</span> <span class="k">=</span> <span class="nc">Map</span><span class="o">[</span><span class="kt">Foo</span>, <span class="kt">Int</span><span class="o">](</span>
  <span class="nc">Foo</span><span class="o">(</span><span class="s">"hello"</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="mi">123</span><span class="o">,</span>
  <span class="nc">Foo</span><span class="o">(</span><span class="s">"world"</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="mi">456</span>
<span class="o">)</span>
<span class="c1">// map: Map[Foo, Int] = Map(Foo("hello") -&gt; 123, Foo("world") -&gt; 456)
</span>
<span class="k">val</span> <span class="n">json</span> <span class="k">=</span> <span class="n">map</span><span class="o">.</span><span class="n">asJson</span>
<span class="c1">// json: Json = JObject(object[hello -&gt; 123,world -&gt; 456])
</span>
<span class="k">implicit</span> <span class="k">val</span> <span class="n">fooKeyDecoder</span><span class="k">:</span> <span class="kt">KeyDecoder</span><span class="o">[</span><span class="kt">Foo</span><span class="o">]</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">KeyDecoder</span><span class="o">[</span><span class="kt">Foo</span><span class="o">]</span> <span class="o">{</span>
  <span class="k">override</span> <span class="k">def</span> <span class="n">apply</span><span class="o">(</span><span class="n">key</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span><span class="k">:</span> <span class="kt">Option</span><span class="o">[</span><span class="kt">Foo</span><span class="o">]</span> <span class="k">=</span> <span class="nc">Some</span><span class="o">(</span><span class="nc">Foo</span><span class="o">(</span><span class="n">key</span><span class="o">))</span>
<span class="o">}</span>
<span class="c1">// fooKeyDecoder: KeyDecoder[Foo] = repl.Session$App$$anon$4@7ea44693
</span>
<span class="n">json</span><span class="o">.</span><span class="n">as</span><span class="o">[</span><span class="kt">Map</span><span class="o">[</span><span class="kt">Foo</span>, <span class="kt">Int</span><span class="o">]]</span>
<span class="c1">// res0: Decoder.Result[Map[Foo, Int]] = Right(
//   Map(Foo("hello") -&gt; 123, Foo("world") -&gt; 456)
// )
</span></code></pre></div></div>

<h3 id="custom-key-mappings-via-annotations">Custom key mappings via annotations</h3>

<p>It’s often necessary to work with keys in your JSON objects that aren’t idiomatic case class member
names in Scala. While the standard generic derivation doesn’t support this use case, the
experimental circe-generic-extras module does provide two ways to transform your case class member
names during encoding and decoding.</p>

<p>In many cases the transformation is as simple as going from camel case to snake case, in which case
all you need is a custom implicit configuration:</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nn">io.circe.generic.extras._</span><span class="o">,</span> <span class="n">io</span><span class="o">.</span><span class="n">circe</span><span class="o">.</span><span class="n">syntax</span><span class="o">.</span><span class="k">_</span>

<span class="k">implicit</span> <span class="k">val</span> <span class="n">config</span><span class="k">:</span> <span class="kt">Configuration</span> <span class="o">=</span> <span class="nc">Configuration</span><span class="o">.</span><span class="n">default</span><span class="o">.</span><span class="n">withSnakeCaseMemberNames</span>
<span class="c1">// config: Configuration = Configuration(
//   io.circe.generic.extras.Configuration$$$Lambda$7101/1793879894@5c19308a,
//   io.circe.generic.extras.Configuration$$$Lambda$7100/1456820902@63c9a0a3,
//   false,
//   None,
//   false
// )
</span>
<span class="nd">@ConfiguredJsonCodec</span> <span class="k">case</span> <span class="k">class</span> <span class="nc">User</span><span class="o">(</span><span class="n">firstName</span><span class="k">:</span> <span class="kt">String</span><span class="o">,</span> <span class="n">lastName</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span>

<span class="nc">User</span><span class="o">(</span><span class="s">"Foo"</span><span class="o">,</span> <span class="s">"McBar"</span><span class="o">).</span><span class="n">asJson</span>
<span class="c1">// res1: Json = JObject(object[first_name -&gt; "Foo",last_name -&gt; "McBar"])
</span></code></pre></div></div>

<p>In other cases you may need more complex mappings. These can be provided as a function:</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nn">io.circe.generic.extras._</span><span class="o">,</span> <span class="n">io</span><span class="o">.</span><span class="n">circe</span><span class="o">.</span><span class="n">syntax</span><span class="o">.</span><span class="k">_</span>

<span class="k">implicit</span> <span class="k">val</span> <span class="n">config</span><span class="k">:</span> <span class="kt">Configuration</span> <span class="o">=</span> <span class="nc">Configuration</span><span class="o">.</span><span class="n">default</span><span class="o">.</span><span class="n">copy</span><span class="o">(</span>
  <span class="n">transformMemberNames</span> <span class="k">=</span> <span class="o">{</span>
    <span class="k">case</span> <span class="s">"i"</span> <span class="k">=&gt;</span> <span class="s">"my-int"</span>
    <span class="k">case</span> <span class="n">other</span> <span class="k">=&gt;</span> <span class="n">other</span>
  <span class="o">}</span>
<span class="o">)</span>
<span class="c1">// config: Configuration = Configuration(
//   &lt;function1&gt;,
//   io.circe.generic.extras.Configuration$$$Lambda$7100/1456820902@63c9a0a3,
//   false,
//   None,
//   false
// )
</span>
<span class="nd">@ConfiguredJsonCodec</span> <span class="k">case</span> <span class="k">class</span> <span class="nc">Bar</span><span class="o">(</span><span class="n">i</span><span class="k">:</span> <span class="kt">Int</span><span class="o">,</span> <span class="n">s</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span>

<span class="nc">Bar</span><span class="o">(</span><span class="mi">13</span><span class="o">,</span> <span class="s">"Qux"</span><span class="o">).</span><span class="n">asJson</span>
<span class="c1">// res3: io.circe.Json = JObject(object[my-int -&gt; 13,s -&gt; "Qux"])
</span></code></pre></div></div>

<p>Since this is a common use case, we also support for mapping member names via an annotation:</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nn">io.circe.generic.extras._</span><span class="o">,</span> <span class="n">io</span><span class="o">.</span><span class="n">circe</span><span class="o">.</span><span class="n">syntax</span><span class="o">.</span><span class="k">_</span>

<span class="k">implicit</span> <span class="k">val</span> <span class="n">config</span><span class="k">:</span> <span class="kt">Configuration</span> <span class="o">=</span> <span class="nc">Configuration</span><span class="o">.</span><span class="n">default</span>
<span class="c1">// config: Configuration = Configuration(
//   io.circe.generic.extras.Configuration$$$Lambda$7099/2003630340@d446ae3,
//   io.circe.generic.extras.Configuration$$$Lambda$7100/1456820902@63c9a0a3,
//   false,
//   None,
//   false
// )
</span>
<span class="nd">@ConfiguredJsonCodec</span> <span class="k">case</span> <span class="k">class</span> <span class="nc">Bar</span><span class="o">(</span><span class="nd">@JsonKey</span><span class="o">(</span><span class="s">"my-int"</span><span class="o">)</span> <span class="n">i</span><span class="k">:</span> <span class="kt">Int</span><span class="o">,</span> <span class="n">s</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span>

<span class="nc">Bar</span><span class="o">(</span><span class="mi">13</span><span class="o">,</span> <span class="s">"Qux"</span><span class="o">).</span><span class="n">asJson</span>
<span class="c1">// res5: io.circe.Json = JObject(object[my-int -&gt; 13,s -&gt; "Qux"])
</span></code></pre></div></div>

<p>It’s worth noting that if you don’t want to use the experimental generic-extras module, the
completely unmagical <code class="highlighter-rouge">forProductN</code> version isn’t really that much of a burden:</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nn">io.circe.Encoder</span><span class="o">,</span> <span class="n">io</span><span class="o">.</span><span class="n">circe</span><span class="o">.</span><span class="n">syntax</span><span class="o">.</span><span class="k">_</span>

<span class="k">case</span> <span class="k">class</span> <span class="nc">User</span><span class="o">(</span><span class="n">firstName</span><span class="k">:</span> <span class="kt">String</span><span class="o">,</span> <span class="n">lastName</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span>
<span class="k">case</span> <span class="k">class</span> <span class="nc">Bar</span><span class="o">(</span><span class="n">i</span><span class="k">:</span> <span class="kt">Int</span><span class="o">,</span> <span class="n">s</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span>

<span class="k">implicit</span> <span class="k">val</span> <span class="n">encodeUser</span><span class="k">:</span> <span class="kt">Encoder</span><span class="o">[</span><span class="kt">User</span><span class="o">]</span> <span class="k">=</span>
  <span class="nc">Encoder</span><span class="o">.</span><span class="n">forProduct2</span><span class="o">(</span><span class="s">"first_name"</span><span class="o">,</span> <span class="s">"last_name"</span><span class="o">)(</span><span class="n">u</span> <span class="k">=&gt;</span> <span class="o">(</span><span class="n">u</span><span class="o">.</span><span class="n">firstName</span><span class="o">,</span> <span class="n">u</span><span class="o">.</span><span class="n">lastName</span><span class="o">))</span>
<span class="c1">// encodeUser: Encoder[User] = io.circe.ProductEncoders$$anon$2@4f4f42a6
</span>
<span class="k">implicit</span> <span class="k">val</span> <span class="n">encodeBar</span><span class="k">:</span> <span class="kt">Encoder</span><span class="o">[</span><span class="kt">Bar</span><span class="o">]</span> <span class="k">=</span>
  <span class="nc">Encoder</span><span class="o">.</span><span class="n">forProduct2</span><span class="o">(</span><span class="s">"my-int"</span><span class="o">,</span> <span class="s">"s"</span><span class="o">)(</span><span class="n">b</span> <span class="k">=&gt;</span> <span class="o">(</span><span class="n">b</span><span class="o">.</span><span class="n">i</span><span class="o">,</span> <span class="n">b</span><span class="o">.</span><span class="n">s</span><span class="o">))</span>
<span class="c1">// encodeBar: Encoder[Bar] = io.circe.ProductEncoders$$anon$2@33ee5d85
</span>
<span class="nc">User</span><span class="o">(</span><span class="s">"Foo"</span><span class="o">,</span> <span class="s">"McBar"</span><span class="o">).</span><span class="n">asJson</span>
<span class="c1">// res7: io.circe.Json = JObject(
//   object[first_name -&gt; "Foo",last_name -&gt; "McBar"]
// )
</span><span class="nc">Bar</span><span class="o">(</span><span class="mi">13</span><span class="o">,</span> <span class="s">"Qux"</span><span class="o">).</span><span class="n">asJson</span>
<span class="c1">// res8: io.circe.Json = JObject(object[my-int -&gt; 13,s -&gt; "Qux"])
</span></code></pre></div></div>

<p>While this version does involve a bit of boilerplate, it only requires circe-core, and may have slightly better runtime performance in some cases.</p>
</section></div></div></div></div><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script><script src="/circe/highlight/highlight.pack.js"></script><script>hljs.configure({languages:['scala','java','bash']});
hljs.initHighlightingOnLoad();
              </script><script>console.info('\x57\x65\x62\x73\x69\x74\x65\x20\x62\x75\x69\x6c\x74\x20\x77\x69\x74\x68\x3a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x5f\x5f\x20\x20\x20\x20\x5f\x5f\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x5f\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x5f\x20\x5f\x5f\x0a\x20\x20\x20\x5f\x5f\x5f\x5f\x5f\x2f\x20\x2f\x5f\x20\x20\x2f\x20\x2f\x5f\x20\x20\x20\x20\x20\x20\x5f\x5f\x5f\x5f\x20\x5f\x5f\x5f\x20\x20\x28\x5f\x29\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x20\x20\x5f\x5f\x5f\x5f\x5f\x28\x5f\x29\x20\x2f\x5f\x5f\x5f\x5f\x20\x20\x5f\x5f\x5f\x5f\x5f\x0a\x20\x20\x2f\x20\x5f\x5f\x5f\x2f\x20\x5f\x5f\x20\x5c\x2f\x20\x5f\x5f\x2f\x5f\x5f\x5f\x5f\x5f\x2f\x20\x5f\x5f\x20\x60\x5f\x5f\x20\x5c\x2f\x20\x2f\x20\x5f\x5f\x5f\x2f\x20\x5f\x5f\x5f\x2f\x20\x5f\x5f\x20\x5c\x2f\x20\x5f\x5f\x5f\x2f\x20\x2f\x20\x5f\x5f\x2f\x20\x5f\x20\x5c\x2f\x20\x5f\x5f\x5f\x2f\x0a\x20\x28\x5f\x5f\x20\x20\x29\x20\x2f\x5f\x2f\x20\x2f\x20\x2f\x5f\x2f\x5f\x5f\x5f\x5f\x5f\x2f\x20\x2f\x20\x2f\x20\x2f\x20\x2f\x20\x2f\x20\x2f\x20\x2f\x5f\x5f\x2f\x20\x2f\x20\x20\x2f\x20\x2f\x5f\x2f\x20\x28\x5f\x5f\x20\x20\x29\x20\x2f\x20\x2f\x5f\x2f\x20\x20\x5f\x5f\x28\x5f\x5f\x20\x20\x29\x0a\x2f\x5f\x5f\x5f\x5f\x2f\x5f\x2e\x5f\x5f\x5f\x2f\x5c\x5f\x5f\x2f\x20\x20\x20\x20\x20\x2f\x5f\x2f\x20\x2f\x5f\x2f\x20\x2f\x5f\x2f\x5f\x2f\x5c\x5f\x5f\x5f\x2f\x5f\x2f\x20\x20\x20\x5c\x5f\x5f\x5f\x5f\x2f\x5f\x5f\x5f\x5f\x2f\x5f\x2f\x5c\x5f\x5f\x2f\x5c\x5f\x5f\x5f\x2f\x5f\x5f\x5f\x5f\x2f\x0a\x0a\x68\x74\x74\x70\x73\x3a\x2f\x2f\x34\x37\x64\x65\x67\x2e\x67\x69\x74\x68\x75\x62\x2e\x69\x6f\x2f\x73\x62\x74\x2d\x6d\x69\x63\x72\x6f\x73\x69\x74\x65\x73')</script><script>((window.gitter = {}).chat = {}).options = {
room: 'circe/circe'};</script><script src="https://sidecar.gitter.im/dist/sidecar.v1.js"></script><script src="/circe/js/main.js"></script></body></html>