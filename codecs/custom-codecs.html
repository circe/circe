<!DOCTYPE html><html><head><title>circe: Custom codecs</title><meta charset="utf-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="Travis Brown" /><meta name="description" content="A JSON library for Scala powered by Cats" /><meta name="og:image" content="/circe/img/poster.png" /><meta name="image" property="og:image" content="/circe/img/poster.png" /><meta name="og:title" content="circe: Custom codecs" /><meta name="title" property="og:title" content="circe: Custom codecs" /><meta name="og:site_name" content="circe" /><meta name="og:url" content="https://circe.github.io/circe/" /><meta name="og:type" content="website" /><meta name="og:description" content="A JSON library for Scala powered by Cats" /><link rel="icon" type="image/png" href="/circe/img/favicon.png" /><meta name="twitter:title" content="circe: Custom codecs" /><meta name="twitter:image" content="/circe/img/poster.png" /><meta name="twitter:description" content="A JSON library for Scala powered by Cats" /><meta name="twitter:card" content="summary_large_image" /><link rel="icon" type="image/png" sizes="16x16" href="/circe/img/favicon16x16.png" /><link rel="icon" type="image/png" sizes="24x24" href="/circe/img/favicon24x24.png" /><link rel="icon" type="image/png" sizes="32x32" href="/circe/img/favicon32x32.png" /><link rel="icon" type="image/png" sizes="48x48" href="/circe/img/favicon48x48.png" /><link rel="icon" type="image/png" sizes="57x57" href="/circe/img/favicon57x57.png" /><link rel="icon" type="image/png" sizes="60x60" href="/circe/img/favicon60x60.png" /><link rel="icon" type="image/png" sizes="64x64" href="/circe/img/favicon64x64.png" /><link rel="icon" type="image/png" sizes="70x70" href="/circe/img/favicon70x70.png" /><link rel="icon" type="image/png" sizes="72x72" href="/circe/img/favicon72x72.png" /><link rel="icon" type="image/png" sizes="76x76" href="/circe/img/favicon76x76.png" /><link rel="icon" type="image/png" sizes="96x96" href="/circe/img/favicon96x96.png" /><link rel="icon" type="image/png" sizes="114x114" href="/circe/img/favicon114x114.png" /><link rel="icon" type="image/png" sizes="120x120" href="/circe/img/favicon120x120.png" /><link rel="icon" type="image/png" sizes="128x128" href="/circe/img/favicon128x128.png" /><link rel="icon" type="image/png" sizes="144x144" href="/circe/img/favicon144x144.png" /><link rel="icon" type="image/png" sizes="150x150" href="/circe/img/favicon150x150.png" /><link rel="icon" type="image/png" sizes="152x152" href="/circe/img/favicon152x152.png" /><link rel="icon" type="image/png" sizes="196x196" href="/circe/img/favicon196x196.png" /><link rel="icon" type="image/png" sizes="310x310" href="/circe/img/favicon310x310.png" /><link rel="icon" type="image/png" sizes="310x150" href="/circe/img/favicon310x150.png" /><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" /><link rel="stylesheet" href="/circe/highlight/styles/atom-one-light.css" /><link rel="stylesheet" href="/circe/css/light-style.css" /><link rel="stylesheet" href="/circe/css/override.css" /></head><body class="docs"><div id="wrapper"><div id="sidebar-wrapper"><div id="sidebar-brand"><a href="/circe/" class="brand"><div class="brand-wrapper"></div><span>circe</span></a><button id="main-toggle" class="sidebar-toggle"><span class="close"></span></button></div><div class="sidebar-nav"> <div class="sidebar-nav-item  "><a href="/circe/parsing.html" title="Parsing JSON" class="">Parsing JSON</a></div> <div class="sidebar-nav-item  "><a href="/circe/cursors.html" title="Traversing and modifying JSON" class="">Traversing and modifying JSON</a></div> <div class="sidebar-nav-item  open"><a href="/circe/codec.html" title="Encoding and decoding" class="drop-nested">Encoding and decoding</a><i class="fa fa-angle-right"></i><div class="sub-section"> <a href="/circe/codecs/semiauto-derivation.html" title="Semi-automatic derivation" class="">Semi-automatic derivation</a> <a href="/circe/codecs/auto-derivation.html" title="Automatic derivation" class="">Automatic derivation</a> <a href="/circe/codecs/custom-codecs.html" title="Custom codecs" class="active">Custom codecs</a> <a href="/circe/codecs/adt.html" title="ADT (Algebraic Data Types)" class="">ADT (Algebraic Data Types)</a> <a href="/circe/codecs/testing.html" title="Codec testing" class="">Codec testing</a> <a href="/circe/codecs/known-issues.html" title="Warnings and known issues" class="">Warnings and known issues</a></div></div> <div class="sidebar-nav-item  "><a href="/circe/optics.html" title="Optics" class="">Optics</a></div> <div class="sidebar-nav-item  "><a href="/circe/performance.html" title="Performance" class="">Performance</a></div> <div class="sidebar-nav-item  "><a href="/circe/contributing.html" title="Guide for contributors" class="">Guide for contributors</a></div></div></div><div id="page-content-wrapper"><div class="nav"><div class="container-fluid"><div class="row"><div class="col-lg-12"><div class="action-menu pull-left clearfix"><a href="#menu-toggle" id="menu-toggle"><i class="fa fa-bars" aria-hidden="true"></i></a></div><ul class="pull-right"><li class="search-nav"><div id="search-dropdown"><label><i class="fa fa-search"></i>Search</label><input id="search-bar" type="text" placeholder="Enter keywords here..." onclick="displayToggleSearch(event)" /><ul id="search-dropdown-content" class="dropdown dropdown-content"></ul></div></li><li id="gh-eyes-item" class="hidden-xs to-uppercase"><a href="https://github.com/circe/circe" target="_blank" rel="noopener noreferrer"><i class="fa fa-eye"></i><span>Watchers<span id="eyes" class="label label-default">--</span></span></a></li><li id="gh-stars-item" class="hidden-xs to-uppercase"><a href="https://github.com/circe/circe" target="_blank" rel="noopener noreferrer"><i class="fa fa-star-o"></i><span>Stars<span id="stars" class="label label-default">--</span></span></a></li></ul></div></div></div></div><div id="content" data-github-owner="circe" data-github-repo="circe"><div class="content-wrapper"><section><h3 id="custom-encodersdecoders">Custom encoders/decoders</h3>

<p>If you want to write your own codec instead of using automatic or semi-automatic derivation, you can do so in a couple of ways.</p>

<p>Firstly, you can write a new <code class="language-plaintext highlighter-rouge">Encoder[A]</code> and <code class="language-plaintext highlighter-rouge">Decoder[A]</code> from scratch:</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nn">io.circe.</span><span class="o">{</span> <span class="nc">Decoder</span><span class="o">,</span> <span class="nc">Encoder</span><span class="o">,</span> <span class="nc">HCursor</span><span class="o">,</span> <span class="nc">Json</span> <span class="o">}</span>

<span class="k">class</span> <span class="nc">Thing</span><span class="o">(</span><span class="k">val</span> <span class="nv">foo</span><span class="k">:</span> <span class="kt">String</span><span class="o">,</span> <span class="k">val</span> <span class="nv">bar</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span>

<span class="k">implicit</span> <span class="k">val</span> <span class="nv">encodeFoo</span><span class="k">:</span> <span class="kt">Encoder</span><span class="o">[</span><span class="kt">Thing</span><span class="o">]</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">Encoder</span><span class="o">[</span><span class="kt">Thing</span><span class="o">]</span> <span class="o">{</span>
  <span class="k">final</span> <span class="k">def</span> <span class="nf">apply</span><span class="o">(</span><span class="n">a</span><span class="k">:</span> <span class="kt">Thing</span><span class="o">)</span><span class="k">:</span> <span class="kt">Json</span> <span class="o">=</span> <span class="nv">Json</span><span class="o">.</span><span class="py">obj</span><span class="o">(</span>
    <span class="o">(</span><span class="s">"foo"</span><span class="o">,</span> <span class="nv">Json</span><span class="o">.</span><span class="py">fromString</span><span class="o">(</span><span class="nv">a</span><span class="o">.</span><span class="py">foo</span><span class="o">)),</span>
    <span class="o">(</span><span class="s">"bar"</span><span class="o">,</span> <span class="nv">Json</span><span class="o">.</span><span class="py">fromInt</span><span class="o">(</span><span class="nv">a</span><span class="o">.</span><span class="py">bar</span><span class="o">))</span>
  <span class="o">)</span>
<span class="o">}</span>
<span class="c1">// encodeFoo: Encoder[Thing] = repl.MdocSession$App$$anon$1@635e63cd</span>

<span class="k">implicit</span> <span class="k">val</span> <span class="nv">decodeFoo</span><span class="k">:</span> <span class="kt">Decoder</span><span class="o">[</span><span class="kt">Thing</span><span class="o">]</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">Decoder</span><span class="o">[</span><span class="kt">Thing</span><span class="o">]</span> <span class="o">{</span>
  <span class="k">final</span> <span class="k">def</span> <span class="nf">apply</span><span class="o">(</span><span class="n">c</span><span class="k">:</span> <span class="kt">HCursor</span><span class="o">)</span><span class="k">:</span> <span class="kt">Decoder.Result</span><span class="o">[</span><span class="kt">Thing</span><span class="o">]</span> <span class="k">=</span>
    <span class="k">for</span> <span class="o">{</span>
      <span class="n">foo</span> <span class="k">&lt;-</span> <span class="nv">c</span><span class="o">.</span><span class="py">downField</span><span class="o">(</span><span class="s">"foo"</span><span class="o">).</span><span class="py">as</span><span class="o">[</span><span class="kt">String</span><span class="o">]</span>
      <span class="n">bar</span> <span class="k">&lt;-</span> <span class="nv">c</span><span class="o">.</span><span class="py">downField</span><span class="o">(</span><span class="s">"bar"</span><span class="o">).</span><span class="py">as</span><span class="o">[</span><span class="kt">Int</span><span class="o">]</span>
    <span class="o">}</span> <span class="k">yield</span> <span class="o">{</span>
      <span class="k">new</span> <span class="nc">Thing</span><span class="o">(</span><span class="n">foo</span><span class="o">,</span> <span class="n">bar</span><span class="o">)</span>
    <span class="o">}</span>
<span class="o">}</span>
<span class="c1">// decodeFoo: Decoder[Thing] = repl.MdocSession$App$$anon$2@27b127e2</span>
</code></pre></div></div>

<p>But in many cases you might find it more convenient to piggyback on top of the decoders that are
already available. For example, a codec for <code class="language-plaintext highlighter-rouge">java.time.Instant</code> might look like this:</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nn">io.circe.</span><span class="o">{</span> <span class="nc">Decoder</span><span class="o">,</span> <span class="nc">Encoder</span> <span class="o">}</span>
<span class="k">import</span> <span class="nn">java.time.Instant</span>
<span class="k">import</span> <span class="nn">scala.util.Try</span>

<span class="k">implicit</span> <span class="k">val</span> <span class="nv">encodeInstant</span><span class="k">:</span> <span class="kt">Encoder</span><span class="o">[</span><span class="kt">Instant</span><span class="o">]</span> <span class="k">=</span> <span class="nv">Encoder</span><span class="o">.</span><span class="py">encodeString</span><span class="o">.</span><span class="py">contramap</span><span class="o">[</span><span class="kt">Instant</span><span class="o">](</span><span class="nv">_</span><span class="o">.</span><span class="py">toString</span><span class="o">)</span>
<span class="c1">// encodeInstant: Encoder[Instant] = io.circe.Encoder$$anon$1@53a33b83</span>

<span class="k">implicit</span> <span class="k">val</span> <span class="nv">decodeInstant</span><span class="k">:</span> <span class="kt">Decoder</span><span class="o">[</span><span class="kt">Instant</span><span class="o">]</span> <span class="k">=</span> <span class="nv">Decoder</span><span class="o">.</span><span class="py">decodeString</span><span class="o">.</span><span class="py">emapTry</span> <span class="o">{</span> <span class="n">str</span> <span class="k">=&gt;</span>
  <span class="nc">Try</span><span class="o">(</span><span class="nv">Instant</span><span class="o">.</span><span class="py">parse</span><span class="o">(</span><span class="n">str</span><span class="o">))</span>
<span class="o">}</span>
<span class="c1">// decodeInstant: Decoder[Instant] = io.circe.Decoder$$anon$14@393a0310</span>
</code></pre></div></div>

<h4 id="older-scala-versions">Older scala versions</h4>

<p>If you are using custom codecs and an older versions of scala (below 2.12) and you get errors like 
this <code class="language-plaintext highlighter-rouge">value flatMap is not a member of io.circe.Decoder.Result[Option[String]]</code> or 
<code class="language-plaintext highlighter-rouge">value map is not a member of io.circe.Decoder.Result[Option[String]]</code> then you need to use the 
following import: <code class="language-plaintext highlighter-rouge">import cats.syntax.either._</code> to fix this.</p>

<h3 id="custom-key-types">Custom key types</h3>

<p>If you need to encode/decode <code class="language-plaintext highlighter-rouge">Map[K, V]</code> where <code class="language-plaintext highlighter-rouge">K</code> is not <code class="language-plaintext highlighter-rouge">String</code> (or <code class="language-plaintext highlighter-rouge">Symbol</code>, <code class="language-plaintext highlighter-rouge">Int</code>, <code class="language-plaintext highlighter-rouge">Long</code>, etc.),
you need to provide a <code class="language-plaintext highlighter-rouge">KeyEncoder</code> and/or <code class="language-plaintext highlighter-rouge">KeyDecoder</code> for your custom key type.</p>

<p>For example:</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nn">io.circe._</span><span class="o">,</span> <span class="nv">io</span><span class="o">.</span><span class="py">circe</span><span class="o">.</span><span class="py">syntax</span><span class="o">.</span><span class="py">_</span>

<span class="k">case</span> <span class="k">class</span> <span class="nc">Foo</span><span class="o">(</span><span class="n">value</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span>

<span class="k">implicit</span> <span class="k">val</span> <span class="nv">fooKeyEncoder</span><span class="k">:</span> <span class="kt">KeyEncoder</span><span class="o">[</span><span class="kt">Foo</span><span class="o">]</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">KeyEncoder</span><span class="o">[</span><span class="kt">Foo</span><span class="o">]</span> <span class="o">{</span>
  <span class="k">override</span> <span class="k">def</span> <span class="nf">apply</span><span class="o">(</span><span class="n">foo</span><span class="k">:</span> <span class="kt">Foo</span><span class="o">)</span><span class="k">:</span> <span class="kt">String</span> <span class="o">=</span> <span class="nv">foo</span><span class="o">.</span><span class="py">value</span>
<span class="o">}</span>
<span class="c1">// fooKeyEncoder: KeyEncoder[Foo] = repl.MdocSession$App$$anon$3@296a5ff1</span>
<span class="k">val</span> <span class="nv">map</span> <span class="k">=</span> <span class="nc">Map</span><span class="o">[</span><span class="kt">Foo</span>, <span class="kt">Int</span><span class="o">](</span>
  <span class="nc">Foo</span><span class="o">(</span><span class="s">"hello"</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="mi">123</span><span class="o">,</span>
  <span class="nc">Foo</span><span class="o">(</span><span class="s">"world"</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="mi">456</span>
<span class="o">)</span>
<span class="c1">// map: Map[Foo, Int] = Map(</span>
<span class="c1">//   Foo(value = "hello") -&gt; 123,</span>
<span class="c1">//   Foo(value = "world") -&gt; 456</span>
<span class="c1">// )</span>

<span class="k">val</span> <span class="nv">json</span> <span class="k">=</span> <span class="nv">map</span><span class="o">.</span><span class="py">asJson</span>
<span class="c1">// json: Json = JObject(value = object[hello -&gt; 123,world -&gt; 456])</span>

<span class="k">implicit</span> <span class="k">val</span> <span class="nv">fooKeyDecoder</span><span class="k">:</span> <span class="kt">KeyDecoder</span><span class="o">[</span><span class="kt">Foo</span><span class="o">]</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">KeyDecoder</span><span class="o">[</span><span class="kt">Foo</span><span class="o">]</span> <span class="o">{</span>
  <span class="k">override</span> <span class="k">def</span> <span class="nf">apply</span><span class="o">(</span><span class="n">key</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span><span class="k">:</span> <span class="kt">Option</span><span class="o">[</span><span class="kt">Foo</span><span class="o">]</span> <span class="k">=</span> <span class="nc">Some</span><span class="o">(</span><span class="nc">Foo</span><span class="o">(</span><span class="n">key</span><span class="o">))</span>
<span class="o">}</span>
<span class="c1">// fooKeyDecoder: KeyDecoder[Foo] = repl.MdocSession$App$$anon$4@279e6de9</span>

<span class="nv">json</span><span class="o">.</span><span class="py">as</span><span class="o">[</span><span class="kt">Map</span><span class="o">[</span><span class="kt">Foo</span>, <span class="kt">Int</span><span class="o">]]</span>
<span class="c1">// res0: Decoder.Result[Map[Foo, Int]] = Right(</span>
<span class="c1">//   value = Map(Foo(value = "hello") -&gt; 123, Foo(value = "world") -&gt; 456)</span>
<span class="c1">// )</span>
</code></pre></div></div>

<h3 id="custom-key-mappings-via-annotations">Custom key mappings via annotations</h3>

<p>It’s often necessary to work with keys in your JSON objects that aren’t idiomatic case class member
names in Scala. While the standard generic derivation doesn’t support this use case, the
experimental circe-generic-extras module does provide two ways to transform your case class member
names during encoding and decoding.</p>

<p>In many cases the transformation is as simple as going from camel case to snake case, in which case
all you need is a custom implicit configuration:</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nn">io.circe.generic.extras._</span><span class="o">,</span> <span class="nv">io</span><span class="o">.</span><span class="py">circe</span><span class="o">.</span><span class="py">syntax</span><span class="o">.</span><span class="py">_</span>

<span class="k">implicit</span> <span class="k">val</span> <span class="nv">config</span><span class="k">:</span> <span class="kt">Configuration</span> <span class="o">=</span> <span class="nv">Configuration</span><span class="o">.</span><span class="py">default</span><span class="o">.</span><span class="py">withSnakeCaseMemberNames</span>
<span class="c1">// config: Configuration = Configuration(</span>
<span class="c1">//   transformMemberNames = io.circe.generic.extras.Configuration$$$Lambda$8484/961000535@694448d9,</span>
<span class="c1">//   transformConstructorNames = io.circe.generic.extras.Configuration$$$Lambda$8483/1125270123@3f42b16a,</span>
<span class="c1">//   useDefaults = false,</span>
<span class="c1">//   discriminator = None,</span>
<span class="c1">//   strictDecoding = false</span>
<span class="c1">// )</span>

<span class="nd">@ConfiguredJsonCodec</span> <span class="k">case</span> <span class="k">class</span> <span class="nc">User</span><span class="o">(</span><span class="n">firstName</span><span class="k">:</span> <span class="kt">String</span><span class="o">,</span> <span class="n">lastName</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span>

<span class="nc">User</span><span class="o">(</span><span class="s">"Foo"</span><span class="o">,</span> <span class="s">"McBar"</span><span class="o">).</span><span class="py">asJson</span>
<span class="c1">// res1: Json = JObject(</span>
<span class="c1">//   value = object[first_name -&gt; "Foo",last_name -&gt; "McBar"]</span>
<span class="c1">// )</span>
</code></pre></div></div>

<p>In other cases you may need more complex mappings. These can be provided as a function:</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nn">io.circe.generic.extras._</span><span class="o">,</span> <span class="nv">io</span><span class="o">.</span><span class="py">circe</span><span class="o">.</span><span class="py">syntax</span><span class="o">.</span><span class="py">_</span>

<span class="k">implicit</span> <span class="k">val</span> <span class="nv">config</span><span class="k">:</span> <span class="kt">Configuration</span> <span class="o">=</span> <span class="nv">Configuration</span><span class="o">.</span><span class="py">default</span><span class="o">.</span><span class="py">copy</span><span class="o">(</span>
  <span class="n">transformMemberNames</span> <span class="k">=</span> <span class="o">{</span>
    <span class="k">case</span> <span class="s">"i"</span> <span class="k">=&gt;</span> <span class="s">"my-int"</span>
    <span class="k">case</span> <span class="n">other</span> <span class="k">=&gt;</span> <span class="n">other</span>
  <span class="o">}</span>
<span class="o">)</span>
<span class="c1">// config: Configuration = Configuration(</span>
<span class="c1">//   transformMemberNames = &lt;function1&gt;,</span>
<span class="c1">//   transformConstructorNames = io.circe.generic.extras.Configuration$$$Lambda$8483/1125270123@3f42b16a,</span>
<span class="c1">//   useDefaults = false,</span>
<span class="c1">//   discriminator = None,</span>
<span class="c1">//   strictDecoding = false</span>
<span class="c1">// )</span>

<span class="nd">@ConfiguredJsonCodec</span> <span class="k">case</span> <span class="k">class</span> <span class="nc">Bar</span><span class="o">(</span><span class="n">i</span><span class="k">:</span> <span class="kt">Int</span><span class="o">,</span> <span class="n">s</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span>

<span class="nc">Bar</span><span class="o">(</span><span class="mi">13</span><span class="o">,</span> <span class="s">"Qux"</span><span class="o">).</span><span class="py">asJson</span>
<span class="c1">// res3: io.circe.Json = JObject(value = object[my-int -&gt; 13,s -&gt; "Qux"])</span>
</code></pre></div></div>

<p>Since this is a common use case, we also support for mapping member names via an annotation:</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nn">io.circe.generic.extras._</span><span class="o">,</span> <span class="nv">io</span><span class="o">.</span><span class="py">circe</span><span class="o">.</span><span class="py">syntax</span><span class="o">.</span><span class="py">_</span>

<span class="k">implicit</span> <span class="k">val</span> <span class="nv">config</span><span class="k">:</span> <span class="kt">Configuration</span> <span class="o">=</span> <span class="nv">Configuration</span><span class="o">.</span><span class="py">default</span>
<span class="c1">// config: Configuration = Configuration(</span>
<span class="c1">//   transformMemberNames = io.circe.generic.extras.Configuration$$$Lambda$8482/101204173@55b4c954,</span>
<span class="c1">//   transformConstructorNames = io.circe.generic.extras.Configuration$$$Lambda$8483/1125270123@3f42b16a,</span>
<span class="c1">//   useDefaults = false,</span>
<span class="c1">//   discriminator = None,</span>
<span class="c1">//   strictDecoding = false</span>
<span class="c1">// )</span>

<span class="nd">@ConfiguredJsonCodec</span> <span class="k">case</span> <span class="k">class</span> <span class="nc">Bar</span><span class="o">(</span><span class="nd">@JsonKey</span><span class="o">(</span><span class="s">"my-int"</span><span class="o">)</span> <span class="n">i</span><span class="k">:</span> <span class="kt">Int</span><span class="o">,</span> <span class="n">s</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span>

<span class="nc">Bar</span><span class="o">(</span><span class="mi">13</span><span class="o">,</span> <span class="s">"Qux"</span><span class="o">).</span><span class="py">asJson</span>
<span class="c1">// res5: io.circe.Json = JObject(value = object[my-int -&gt; 13,s -&gt; "Qux"])</span>
</code></pre></div></div>

<p>It’s worth noting that if you don’t want to use the experimental generic-extras module, the
completely unmagical <code class="language-plaintext highlighter-rouge">forProductN</code> version isn’t really that much of a burden:</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nn">io.circe.Encoder</span><span class="o">,</span> <span class="nv">io</span><span class="o">.</span><span class="py">circe</span><span class="o">.</span><span class="py">syntax</span><span class="o">.</span><span class="py">_</span>

<span class="k">case</span> <span class="k">class</span> <span class="nc">User</span><span class="o">(</span><span class="n">firstName</span><span class="k">:</span> <span class="kt">String</span><span class="o">,</span> <span class="n">lastName</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span>
<span class="k">case</span> <span class="k">class</span> <span class="nc">Bar</span><span class="o">(</span><span class="n">i</span><span class="k">:</span> <span class="kt">Int</span><span class="o">,</span> <span class="n">s</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span>

<span class="k">implicit</span> <span class="k">val</span> <span class="nv">encodeUser</span><span class="k">:</span> <span class="kt">Encoder</span><span class="o">[</span><span class="kt">User</span><span class="o">]</span> <span class="k">=</span>
  <span class="nv">Encoder</span><span class="o">.</span><span class="py">forProduct2</span><span class="o">(</span><span class="s">"first_name"</span><span class="o">,</span> <span class="s">"last_name"</span><span class="o">)(</span><span class="n">u</span> <span class="k">=&gt;</span> <span class="o">(</span><span class="nv">u</span><span class="o">.</span><span class="py">firstName</span><span class="o">,</span> <span class="nv">u</span><span class="o">.</span><span class="py">lastName</span><span class="o">))</span>
<span class="c1">// encodeUser: Encoder[User] = io.circe.ProductEncoders$$anon$2@95b05c</span>

<span class="k">implicit</span> <span class="k">val</span> <span class="nv">encodeBar</span><span class="k">:</span> <span class="kt">Encoder</span><span class="o">[</span><span class="kt">Bar</span><span class="o">]</span> <span class="k">=</span>
  <span class="nv">Encoder</span><span class="o">.</span><span class="py">forProduct2</span><span class="o">(</span><span class="s">"my-int"</span><span class="o">,</span> <span class="s">"s"</span><span class="o">)(</span><span class="n">b</span> <span class="k">=&gt;</span> <span class="o">(</span><span class="nv">b</span><span class="o">.</span><span class="py">i</span><span class="o">,</span> <span class="nv">b</span><span class="o">.</span><span class="py">s</span><span class="o">))</span>
<span class="c1">// encodeBar: Encoder[Bar] = io.circe.ProductEncoders$$anon$2@52f3c289</span>

<span class="nc">User</span><span class="o">(</span><span class="s">"Foo"</span><span class="o">,</span> <span class="s">"McBar"</span><span class="o">).</span><span class="py">asJson</span>
<span class="c1">// res7: io.circe.Json = JObject(</span>
<span class="c1">//   value = object[first_name -&gt; "Foo",last_name -&gt; "McBar"]</span>
<span class="c1">// )</span>
<span class="nc">Bar</span><span class="o">(</span><span class="mi">13</span><span class="o">,</span> <span class="s">"Qux"</span><span class="o">).</span><span class="py">asJson</span>
<span class="c1">// res8: io.circe.Json = JObject(value = object[my-int -&gt; 13,s -&gt; "Qux"])</span>
</code></pre></div></div>

<p>While this version does involve a bit of boilerplate, it only requires circe-core, and may have slightly better runtime performance in some cases.</p>
</section></div></div></div></div><script src="/circe/highlight/highlight.pack.js"></script><script src="/circe/lunr/lunr.js"></script><script>
// For all code blocks, copy the language from the containing div
// to the inner code tag (where hljs expects it to be)
const langPrefix = 'language-';
document.querySelectorAll(`div[class^='${langPrefix}']`).forEach(function(div) {
  div.classList.forEach(function(cssClass) {
    if (cssClass.startsWith(langPrefix)) {
      const lang = cssClass.substring(langPrefix.length);
      div.querySelectorAll('pre code').forEach(function(code) {
        code.classList.add(lang);
      });
    }
  });
});

hljs.configure({languages:['scala','java','bash']});
hljs.initHighlightingOnLoad();
      </script><script>console.info('\x57\x65\x62\x73\x69\x74\x65\x20\x62\x75\x69\x6c\x74\x20\x77\x69\x74\x68\x3a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x5f\x5f\x20\x20\x20\x20\x5f\x5f\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x5f\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x5f\x20\x5f\x5f\x0a\x20\x20\x20\x5f\x5f\x5f\x5f\x5f\x2f\x20\x2f\x5f\x20\x20\x2f\x20\x2f\x5f\x20\x20\x20\x20\x20\x20\x5f\x5f\x5f\x5f\x20\x5f\x5f\x5f\x20\x20\x28\x5f\x29\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x20\x20\x5f\x5f\x5f\x5f\x5f\x28\x5f\x29\x20\x2f\x5f\x5f\x5f\x5f\x20\x20\x5f\x5f\x5f\x5f\x5f\x0a\x20\x20\x2f\x20\x5f\x5f\x5f\x2f\x20\x5f\x5f\x20\x5c\x2f\x20\x5f\x5f\x2f\x5f\x5f\x5f\x5f\x5f\x2f\x20\x5f\x5f\x20\x60\x5f\x5f\x20\x5c\x2f\x20\x2f\x20\x5f\x5f\x5f\x2f\x20\x5f\x5f\x5f\x2f\x20\x5f\x5f\x20\x5c\x2f\x20\x5f\x5f\x5f\x2f\x20\x2f\x20\x5f\x5f\x2f\x20\x5f\x20\x5c\x2f\x20\x5f\x5f\x5f\x2f\x0a\x20\x28\x5f\x5f\x20\x20\x29\x20\x2f\x5f\x2f\x20\x2f\x20\x2f\x5f\x2f\x5f\x5f\x5f\x5f\x5f\x2f\x20\x2f\x20\x2f\x20\x2f\x20\x2f\x20\x2f\x20\x2f\x20\x2f\x5f\x5f\x2f\x20\x2f\x20\x20\x2f\x20\x2f\x5f\x2f\x20\x28\x5f\x5f\x20\x20\x29\x20\x2f\x20\x2f\x5f\x2f\x20\x20\x5f\x5f\x28\x5f\x5f\x20\x20\x29\x0a\x2f\x5f\x5f\x5f\x5f\x2f\x5f\x2e\x5f\x5f\x5f\x2f\x5c\x5f\x5f\x2f\x20\x20\x20\x20\x20\x2f\x5f\x2f\x20\x2f\x5f\x2f\x20\x2f\x5f\x2f\x5f\x2f\x5c\x5f\x5f\x5f\x2f\x5f\x2f\x20\x20\x20\x5c\x5f\x5f\x5f\x5f\x2f\x5f\x5f\x5f\x5f\x2f\x5f\x2f\x5c\x5f\x5f\x2f\x5c\x5f\x5f\x5f\x2f\x5f\x5f\x5f\x5f\x2f\x0a\x0a\x68\x74\x74\x70\x73\x3a\x2f\x2f\x34\x37\x64\x65\x67\x2e\x67\x69\x74\x68\x75\x62\x2e\x69\x6f\x2f\x73\x62\x74\x2d\x6d\x69\x63\x72\x6f\x73\x69\x74\x65\x73')</script><script>((window.gitter = {}).chat = {}).options = {
room: 'circe/circe'};</script><script src="https://sidecar.gitter.im/dist/sidecar.v1.js"></script><script src="/circe/js/search.js"></script><script src="/circe/js/docs.js"></script></body></html>